(this["webpackJsonppowietrze.pl"]=this["webpackJsonppowietrze.pl"]||[]).push([[0],{30:function(e,n,t){e.exports=t(44)},35:function(e,n,t){},36:function(e,n,t){},37:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),i=t(15),r=t.n(i),c=(t(35),t(36),t(28)),l=t(11),s=t(24),u=t(48),p=t(49),d=t(47),f=t(46),v=t(50),m=(t(37),t(38),t(1)),h=t.n(m);function g(){var e=Object(o.useState)([]),n=Object(s.a)(e,2),t=n[0],i=n[1],r={lat:51.107,lon:17.0385},c=Object(o.useState)(null),l=Object(s.a)(c,2),m=l[0],g=l[1];Object(o.useEffect)((function(){m||(navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){g({lat:e.coords.latitude,lon:e.coords.longitude})}),(function(){g(r)})):g(r))}),[m,r]);Object(o.useEffect)((function(){m&&fetch("https://powietrze.herokuapp.com/api/values",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({position:m})}).then((function(e){return e.json()})).then((function(e){return i(e)}))}),[m]);var w=h.a.divIcon({className:"div-icon inactive",iconSize:[20,20]}),b=h.a.divIcon({className:"div-icon ok",iconSize:[20,20]}),k=h.a.divIcon({className:"div-icon level-1",iconSize:[20,20]}),E=h.a.divIcon({className:"div-icon level-2",iconSize:[20,20]}),z=h.a.divIcon({className:"div-icon level-3",iconSize:[20,20]}),O=h.a.divIcon({className:"div-icon level-4",iconSize:[20,20]});function S(e){switch(e.source){case"AIRLY":return"https://airly.eu/pl/";case"GIOS":return"https://powietrze.gios.gov.pl/pjp/content/api";case"PWR":return"http://powietrze.pwr.edu.pl";case"LOOKO2":return"https://looko2.com"}}function y(e){return{lat:e.lat,lng:e.lon}}return a.a.createElement(u.a,{center:y(m||r),zoom:10,id:"mapid"},a.a.createElement(p.a,{url:"https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",attribution:'\xa9 <a href="https://www.mapbox.com/about/maps/">Mapbox</a>  \xa9 <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>  <strong><a href="https://www.mapbox.com/map-feedback/" target="_blank" rel="noreferer noopener"> Improve this map</a></strong>',id:"mapbox.light",accessToken:"pk.eyJ1IjoibWthcm9sIiwiYSI6ImNqazl4ODMxMDJ3OTEzd2xlbnN6OHRlMTgifQ.I_mm4Sc8fkKJaFpQc8BWjg"}),m&&a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{center:y(m),radius:5e3}),t.map((function(e,n){return a.a.createElement(f.a,{position:y(e),key:n,icon:(t=e,null===t.value?w:t.value<10?b:t.value<15?k:t.value<25?E:t.value<35?z:O)},e.value&&a.a.createElement(v.a,null,e.value," ug/m3"," ",a.a.createElement("a",{href:S(e),target:"_blank",rel:"noopener noreferrer"},e.source)));var t}))))}var w=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(c.a,{basename:"/"},a.a.createElement(l.c,null,a.a.createElement(l.a,{exact:!0,path:"/"},a.a.createElement(g,null)))))},b=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(a.a.createElement(w,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/powietrze",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/powietrze","/service-worker.js");b?(!function(e,n){fetch(e).then((function(t){var o=t.headers.get("content-type");404===t.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):k(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):k(n,e)}))}}()}},[[30,1,2]]]);
//# sourceMappingURL=main.4df9a3bf.chunk.js.map