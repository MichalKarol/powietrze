(this["webpackJsonppowietrze.pl"]=this["webpackJsonppowietrze.pl"]||[]).push([[0],{31:function(e,t,n){e.exports=n(45)},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(15),i=n.n(r),c=(n(36),n(37),n(29)),l=n(11),s=n(24),u=n(49),p=n(50),f=n(48),m=n(47),v=n(51),d=(n(38),n(39),n(4)),h=n.n(d),g=n(27),w=n.n(g);function b(){var e=Object(o.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],i={lat:51.107,lon:17.0385},c=Object(o.useState)(null),l=Object(s.a)(c,2),d=l[0],g=l[1];Object(o.useEffect)((function(){d||(navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){g({lat:e.coords.latitude,lon:e.coords.longitude})}),(function(){g(i)})):g(i))}),[d,i]);Object(o.useEffect)((function(){d&&fetch("https://powietrze.herokuapp.com/api/values",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({position:d})}).then((function(e){return e.json()})).then((function(e){return r(e)}))}),[d]);var b=new Map(["inactive","ok","level-1","level-2","level-3","level-4"].map((function(e){return[e,h.a.divIcon({className:"div-icon ".concat(e),iconSize:[20,20]})]})));function k(e){return null===e?"inactive":e<10?"ok":e<15?"level-1":e<25?"level-2":e<35?"level-3":"level-4"}function E(e){switch(e.source){case"AIRLY":return"https://airly.eu/pl/";case"GIOS":return"https://powietrze.gios.gov.pl/pjp/content/api";case"PWR":return"http://powietrze.pwr.edu.pl";case"LOOKO2":return"https://looko2.com"}}function O(e){return{lat:e.lat,lng:e.lon}}function y(e){return e.reduce((function(e,t){return e+(t.value||0)}),0)/e.length}return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"map-container"},a.a.createElement(u.a,{center:O(d||i),zoom:10,id:"mapid"},a.a.createElement(p.a,{url:"https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",attribution:'\xa9 <a href="https://www.mapbox.com/about/maps/">Mapbox</a>  \xa9 <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>  <strong><a href="https://www.mapbox.com/map-feedback/" target="_blank" rel="noreferer noopener"> Improve this map</a></strong>',id:"mapbox.light",accessToken:"pk.eyJ1IjoibWthcm9sIiwiYSI6ImNqazl4ODMxMDJ3OTEzd2xlbnN6OHRlMTgifQ.I_mm4Sc8fkKJaFpQc8BWjg"},"XD"),d&&a.a.createElement(a.a.Fragment,null,a.a.createElement(f.a,{center:O(d),radius:5e3}),n.map((function(e,t){return a.a.createElement(m.a,{position:O(e),key:t,icon:(n=e,b.get(k(n.value)))},e.value&&a.a.createElement(v.a,null,e.value," ug/m3"," ",a.a.createElement("a",{href:E(e),target:"_blank",rel:"noopener noreferrer"},e.source)));var n}))),n.length>0?a.a.createElement("div",{className:w()(["pollution-avg",k(y(n))])},y(n).toPrecision(2)):a.a.createElement("div",{className:"pollution-avg inactive"}," - "))))}var k=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(c.a,{basename:"/"},a.a.createElement(l.c,null,a.a.createElement(l.a,{exact:!0,path:"/"},a.a.createElement(b,null)))))},E=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function O(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(a.a.createElement(k,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/powietrze",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/powietrze","/service-worker.js");E?(!function(e,t){fetch(e).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):O(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):O(t,e)}))}}()}},[[31,1,2]]]);
//# sourceMappingURL=main.c56e79d4.chunk.js.map